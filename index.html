<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MISLGOM ëŒ€ë³¸ ê²€ìˆ˜ ìë™ í”„ë¡œê·¸ë¨</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./css/style.css">
    <style>
        .logo-title { font-family: 'Orbitron', sans-serif; font-size: 2rem; font-weight: 700; letter-spacing: 2px; }
        .progress-container { display: none; margin: 20px 0; padding: 15px; background: #f5f5f5; border-radius: 8px; }
        .dark-mode .progress-container { background: #2a2a2a; }
        .progress-bar-wrapper { display: flex; align-items: center; gap: 15px; }
        .progress-bar-outer { flex: 1; height: 20px; background: #ddd; border-radius: 10px; overflow: hidden; }
        .dark-mode .progress-bar-outer { background: #444; }
        .progress-bar { height: 100%; background: linear-gradient(90deg, #4CAF50, #8BC34A); width: 0%; transition: width 0.3s; }
        .progress-text { min-width: 120px; font-weight: bold; }
        .btn-stop { background: #f44336; color: white; border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer; font-weight: bold; }
        .btn-stop:hover { background: #d32f2f; }
        .btn-stop:disabled { background: #999; cursor: not-allowed; }
        .revision-count { font-size: 0.9rem; color: #4CAF50; margin-left: 10px; font-weight: bold; }
        .dark-mode .revision-count { color: #8BC34A; }
        .clickable-row { cursor: pointer; transition: background 0.2s; }
        .clickable-row:hover { background: rgba(76, 175, 80, 0.1); }
        .highlight-flash { animation: flashHighlight 1.5s ease-out; }
        @keyframes flashHighlight { 0%, 100% { background: transparent; } 50% { background: #ffeb3b; } }
        .changed-text { background: #c8e6c9; padding: 1px 3px; border-radius: 3px; }
        .dark-mode .changed-text { background: #2e7d32; color: #fff; }
        .click-hint { font-size: 0.8rem; color: #888; margin-bottom: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <!-- í—¤ë” -->
        <header class="header">
            <h1 class="logo-title">MISLGOM</h1>
            <p class="subtitle">ëŒ€ë³¸ ê²€ìˆ˜ ìë™ í”„ë¡œê·¸ë¨ v4.3</p>
            <div class="header-controls">
                <button id="btn-dark-mode" class="btn-secondary">ğŸŒ™ ë‹¤í¬ëª¨ë“œ</button>
                <button id="btn-api-settings" class="btn-secondary">âš™ï¸ API í‚¤ ì„¤ì •</button>
            </div>
        </header>

        <!-- API í‚¤ ì„¤ì • íŒ¨ë„ -->
        <div id="api-key-panel" class="api-key-panel" style="display: none;">
            <div class="api-key-content">
                <h3>ğŸ”‘ Gemini API í‚¤ ì„¤ì •</h3>
                <input type="password" id="api-key-input" placeholder="API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
                <div class="api-key-buttons">
                    <button id="btn-save-api-key" class="btn-primary">ì €ì¥</button>
                    <button id="btn-close-api-panel" class="btn-secondary">ë‹«ê¸°</button>
                </div>
                <p class="api-key-hint">* API í‚¤ëŠ” ë¸Œë¼ìš°ì €ì— ì•ˆì „í•˜ê²Œ ì €ì¥ë©ë‹ˆë‹¤</p>
            </div>
        </div>

        <!-- íŒŒì¼ ì—…ë¡œë“œ ì˜ì—­ -->
        <section class="upload-section">
            <div id="drop-zone" class="drop-zone">
                <div class="drop-zone-content">
                    <span class="drop-icon">ğŸ“„</span>
                    <p>TXT íŒŒì¼ì„ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì—…ë¡œë“œ</p>
                    <p id="file-name-display" class="file-name-display"></p>
                </div>
                <input type="file" id="file-input" accept=".txt" style="display: none;">
            </div>
        </section>

        <!-- ì›ë³¸ ëŒ€ë³¸ ì…ë ¥ -->
        <section class="input-section">
            <h2>ğŸ“ ì›ë³¸ ëŒ€ë³¸</h2>
            <textarea id="original-script" placeholder="ë¶„ì„í•  ëŒ€ë³¸ì„ ì…ë ¥í•˜ê±°ë‚˜ TXT íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì„¸ìš”..."></textarea>
            <div class="char-count">ê¸€ì ìˆ˜: <span id="char-count">0</span></div>
        </section>

        <!-- ë¶„ì„ ë²„íŠ¼ ì˜ì—­ -->
        <section class="analysis-buttons">
            <button id="btn-analyze-stage1" class="btn-primary btn-large">ğŸ” 1ì°¨ ë¶„ì„ ì‹œì‘</button>
            <button id="btn-analyze-stage2" class="btn-primary btn-large" disabled>ğŸ” 2ì°¨ ë¶„ì„ ì‹œì‘</button>
        </section>

        <!-- ì§„í–‰ë¥  ë°” ì˜ì—­ -->
        <div id="progress-container" class="progress-container">
            <div class="progress-bar-wrapper">
                <div class="progress-bar-outer">
                    <div id="progress-bar" class="progress-bar"></div>
                </div>
                <span id="progress-text" class="progress-text">ëŒ€ê¸° ì¤‘...</span>
                <button id="btn-stop-analysis" class="btn-stop" disabled>â¹ ì¤‘ì§€</button>
            </div>
        </div>

        <!-- 4ì¹¸ ê²°ê³¼ ì˜ì—­ -->
        <section class="results-grid">
            <!-- 1ì°¨ ë¶„ì„ ê²°ê³¼ -->
            <div class="result-panel">
                <h3>ğŸ“Š 1ì°¨ ë¶„ì„ ê²°ê³¼</h3>
                <div id="analysis-stage1" class="result-content">
                    <p class="placeholder">1ì°¨ ë¶„ì„ì„ ì‹œì‘í•˜ë©´ ê²°ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤.</p>
                </div>
            </div>

            <!-- 1ì°¨ ìˆ˜ì • ë°˜ì˜ -->
            <div class="result-panel">
                <h3>âœï¸ 1ì°¨ ìˆ˜ì • ë°˜ì˜ <span id="revision-count-stage1" class="revision-count"></span></h3>
                <div id="revised-stage1" class="result-content">
                    <p class="placeholder">1ì°¨ ë¶„ì„ í›„ ìˆ˜ì •ë³¸ì´ í‘œì‹œë©ë‹ˆë‹¤.</p>
                </div>
            </div>

            <!-- 2ì°¨ ë¶„ì„ ê²°ê³¼ -->
            <div class="result-panel">
                <h3>ğŸ“Š 2ì°¨ ë¶„ì„ ê²°ê³¼</h3>
                <div id="analysis-stage2" class="result-content">
                    <p class="placeholder">2ì°¨ ë¶„ì„ì„ ì‹œì‘í•˜ë©´ ê²°ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤.</p>
                </div>
            </div>

            <!-- ìµœì¢… ìˆ˜ì • ë°˜ì˜ -->
            <div class="result-panel">
                <h3>âœ… ìµœì¢… ìˆ˜ì • ë°˜ì˜ <span id="revision-count-stage2" class="revision-count"></span></h3>
                <div id="revised-stage2" class="result-content">
                    <p class="placeholder">2ì°¨ ë¶„ì„ í›„ ìµœì¢…ë³¸ì´ í‘œì‹œë©ë‹ˆë‹¤.</p>
                </div>
            </div>
        </section>

        <!-- ëŒ€ë³¸ ë¶„ì„ ì ìˆ˜ -->
        <section class="score-section">
            <h2>ğŸ“ˆ ëŒ€ë³¸ ë¶„ì„ ì ìˆ˜</h2>
            <div id="score-display" class="score-display">
                <p class="placeholder">ë¶„ì„ ì™„ë£Œ í›„ ì ìˆ˜ê°€ í‘œì‹œë©ë‹ˆë‹¤.</p>
            </div>
        </section>

        <!-- ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ -->
        <section class="download-section">
            <button id="btn-download" class="btn-secondary" disabled>ğŸ“¥ ìµœì¢… ìˆ˜ì •ë³¸ ë‹¤ìš´ë¡œë“œ</button>
        </section>
    </div>

    <script src="./js/main.js"></script>
</body>
</html>
